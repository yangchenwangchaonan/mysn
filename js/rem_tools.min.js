var remTools=new function(){this.scale=1;this.window=$(window);this.width=7.5;this.height=this.window.height()/setSize.size;this.offsetTime=this.lastTime=this.nowTime=!1;this.animationSpeed=1};remTools.auto=function(){this.autoWidth();this.center()};remTools.popAnimate=function(a){var b=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame||function(a){setTimeout(a,1E3/60)};this.init=function(){b(loop=function(){a&&a();b(loop)})};this.init()};remTools.setAnimationSpeed=function(){this.lastTime?(this.nowTime=this.now(),this.offsetTime=this.nowTime-this.lastTime,this.animationSpeed=Math.ceil(this.offsetTime/17),20<=this.animationSpeed&&(this.animationSpeed=20),this.lastTime=this.nowTime):this.lastTime=this.now()};remTools.now=Date.now||function(){return(new Date).getTime()};remTools.imgLoad=function(a,b){var c="string"==typeof a?a:$(a).attr("src"),e=new Image;e.src=c;e.onload=function(){b&&b(this,a)}};remTools.center=function(a){a=a?a:{};a.attr=a.attr?a.attr:"center";a.objs=$("*["+a.attr+"]");for(var b=0;b<a.objs.length;b++)switch(a.objs[b].tagName){case "IMG":this.imgLoad(a.objs[b],function(f,a){var c=$(a),b=parseFloat(c.attr("scale"));c.css("left",(remTools.width-b*f.width/100)/2+"rem")});break;default:var c=$(a.objs[b]),e=parseFloat(c.attr("scale"));c.css("left",(remTools.width-e*c.width()/setSize.size)/2+"rem")}a.hAttr=a.hAttr?a.hAttr:"hCenter";a.hType=a.hType?a.hType:"hType";a.hObjs=$("*["+a.hAttr+"]");for(b=0;b<a.hObjs.length;b++)switch(a.hObjs[b].tagName){case "IMG":this.imgLoad(a.hObjs[b],function(f,c){var b=$(c),d=b.attr(a.hType),e=parseFloat(b.attr("scale")),e=isNaN(e)?1:e;d||(d="top");e=(remTools.height-e*f.height/100)/2;b.css(d,(0>e?0:e)+"rem")});break;default:var c=$(a.hObjs[b]),d=c.attr(a.hType),e=parseFloat(c.attr("scale")),e=isNaN(e)?1:e;d||(d="top");e=(remTools.height-e*c.height()/setSize.size)/2;e=0>e?0:e;c.css(d,e+"rem")}};remTools.autoWidth=function(a){for(var b=$("*"),c=0;c<b.length;c++){var e=$(b[c]);if("noauto"!=e.attr("noauto"))switch(b[c].tagName){case "IMG":this.imgLoad(b[c],function(f,a){var c=$(a),b=remTools.scale;"noscale"==c.attr("noscale")&&(b=1);$(a).attr("scale",b).css("width",b*f.width/100+"rem")});break;case "DIV":if(a){var d=$(b[c]),f=remTools.scale;"noscale"==e.attr("noscale")&&(f=1);d.attr("scale",1).css("width",f*d.width()/setSize.size+"rem").css("height",f*d.height()/setSize.size+"rem")}}}};remTools.getRem=function(a,b){switch(a[0].tagName){case "IMG":return a.width()/100;default:return a.width()/setSize.size}};remTools.handDir=function(){var a=this;a.limit=10;a.touch={x:!1,y:!1,allow:!0,time:650};a.getDir=function(b){var c=b.originalEvent.changedTouches[0].pageX;b=b.originalEvent.changedTouches[0].pageY;if(a.touch.allow)if(a.touch.y||(a.touch.x=c,a.touch.y=b),Math.abs(a.touch.x-c)<Math.abs(a.touch.y-b)){if(a.touch.y-b>a.limit)return a.reHand(),1;if(b-a.touch.y>a.limit)return a.reHand(),2}else{if(a.touch.x-c>a.limit)return a.reHand(),3;if(c-a.touch.x>a.limit)return a.reHand(),4}};a.reHand=function(){a.touch.allow=!1;setTimeout(function(){a.touch.allow=!0},a.touch.time)};a.reHandTouch=function(){a.touch.x=a.touch.y=!1};a.getValue=function(b){var c=b.originalEvent.changedTouches[0].pageX;b=b.originalEvent.changedTouches[0].pageY;if(0==a.touch.x)return a.touch.x=c,a.touch.y=b,{x:0,y:0};var e=c-a.touch.x,d=b-a.touch.y;a.touch.x=c;a.touch.y=b;return{x:e,y:d}}};remTools.removeClass=function(a){var b=a.attr("class");if("string"==typeof b){var c=b.indexOf(" ");-1!=c&&(b=b.substr(0,c),a.attr("class",b))}return a};remTools.alertObj=function(a){a=a?a:{};a.id=a.id?a.id:"alert";a.textID=a.textID?a.textID:"alert_text";a.textWidth=a.textWidth?a.textWidth:5;a.textHeight=a.textHeight?a.textHeight:3.5;a.textLeft=a.textLeft?a.textLeft:1.25;a.textTop=a.textTop?a.textTop:4;a.style=a.style?a.style:"\x3cdiv id\x3d'"+a.id+"'\x3e\x3cdiv style\x3d'position:absolute;width:100%;height:100%;left:0%;top:0%;background:#000;opacity:0.7;'\x3e\x3c/div\x3e\x3cdiv style\x3d'position:absolute;width:"+a.textWidth+"rem;height:"+a.textHeight+"rem;left:"+a.textLeft+"rem;top:"+a.textTop+"rem;background:#fff;text-align:center;font-size:0.3rem;border:2px solid #b09767;'\x3e\x3cdiv style\x3d'position:absolute;width:100%;left:0%;bottom:0%;height:0.8rem;line-height:0.8rem;background:#b09767;color:#fff;'\x3e\u6211\u77e5\u9053\u4e86\x3c/div\x3e\x3cdiv id\x3d'"+a.textID+"' style\x3d'position:absolute;width:100%;left:0%;top:1rem;font-size:0.4rem;'\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e";var b=this;b.style=a.style;b.obj=!1;b.textObj=!1;b.init=function(){$("body").append(a.style);b.obj=$("#"+a.id);b.textObj=$("#"+a.textID);b.obj.hide().bind("touchstart",function(){$(this).fadeOut(500)})};b.alert=function(a){b.obj.show();b.textObj.html(a)};b.init()};remTools.getAttr=function(a,b,c){a=$(a);var e,d,f;if("IMG"!=a[0].nodeName)alert("\u53ea\u652f\u6301IMG\u5bf9\u8c61");else{f=a[0];var h=a.css("left"),g=a.css("right"),k=a.css("top");a=a.css("bottom");"auto"==h&&"auto"==g&&"auto"==k&&"auto"==a&&(d=e=0);"auto"!=h&&"auto"==g&&(e=parseInt(h));"auto"!=k&&"auto"==a&&(d=parseInt(k));"auto"==h&&"auto"!=g&&(e=$(window).width()-(parseInt(g)+b));"auto"==k&&"auto"!=a&&(d=$(window).height()-(parseInt(a)+c));return{left:e,top:d,width:b,height:c,img:f}}};remTools.autoTop=function(){for(var a=$("[autoTop]"),b=$(window).height()/setSize.size,c=0;c<a.length;c++){var e=$(a[c]),d=parseFloat(e.attr("aTop")),f=parseFloat(e.attr("aHeight"));d+f>b?e.css("top",b-f+"rem"):e.css("top",d+"rem")}};remTools.autoBind=function(a){a=a?a:{};a.objs=a.objs?a.objs:$("*");a.aTime=a.aTime?a.aTime:500;a.closeSelf=a.closeSelf?a.closeSelf:{attr:"closeSelf",value:"closeSelf"};a.openTar=a.openTar?a.openTar:{attr:"openTar",value:""};for(var b=0;b<a.objs.length;b++){var c=$(a.objs[b]);c.attr(a.closeSelf.attr)==a.closeSelf.value&&c.bind("touchstart",function(){$(this).fadeOut(a.aTime)});void 0!=c.attr(a.openTar.attr)&&c.bind("touchstart",function(){var c=$(this).attr(a.openTar.attr);$(c).fadeIn(a.aTime)})}};remTools.imageLoad=function(a,b){var c=this;c.repeatSpeed=a?a:200;c.repeatNumber=b?b:5;c.current=0;c.finish=0;c.percent=0;c.autoGet=function(){for(var a=[],c=$("img"),f=0;f<c.length;f++){var b=$(c[f]),g=b.attr("ssrc");g?(a.push(b.attr("ssrc")),b.attr("src",g)):a.push(b.attr("src"))}return a};c.start=function(a,b){c.urls=c.autoGet();c.callBack=a?a:!1;c.finishBack=b?b:!1;c.current=0;c.finish=0;var f=setInterval(function(){for(var a=0;a<c.repeatNumber;a++)if(c.current<c.urls.length){var b=new Image;b.src=c.urls[c.current];b.onload=function(){c.finish+=1;c.percent=Math.floor(100*c.finish/c.urls.length);c.callBack&&c.callBack(c.percent);c.finish>=c.urls.length&&c.finishBack&&(clearInterval(f),c.finishBack())};b.onerror=function(){console.log("\u6709\u4e00\u5f20\u56fe\u7247\u52a0\u8f7d\u5931\u8d25!\u9519\u8bef\u8def\u5f84\u4e3a:"+this.src)};c.current++}else clearInterval(f)},c.repeatSpeed)}};remTools.editHB=function(a,b,c,e){var d=this;d.c_obj;d.canvasDom;d.init=function(a,b,c){d.c_obj=remTools.getCanvas(a,b,c);d.canvasDom=document.getElementById(a)};d.CD=function(a){a=a?a:{};a.id=a.id?a.id:!1;a.obj="string"==typeof a.id?document.getElementById(a.id):a.id;a.left="number"==typeof a.left?a.left:0;a.top="number"==typeof a.top?a.top:0;a.width="number"==typeof a.width?a.width:a.obj.width;a.height="number"==typeof a.height?a.height:a.obj.height;a.sx="number"==typeof a.sx?a.sx:0;a.sy="number"==typeof a.sy?a.sy:0;a.sw="number"==typeof a.sw?a.sw:a.width;a.sh="number"==typeof a.sh?a.sh:a.height;a.sfromObj="boolean"==typeof a.sfromObj?a.sfromObj:!0;a.sfromObj&&(a.sw=a.obj.width,a.sh=a.obj.height);d.c_obj.drawImage(a.obj,a.sx,a.sy,a.sw,a.sh,a.left,a.top,a.width,a.height)};d.CT=function(a){a=a?a:{};a.text=a.text?a.text:"Hello World";a.width=a.width?a.width:200;a.lineHeight=a.lineHeight?a.lineHeight:30;a.left="number"==typeof a.left?a.left:0;a.top="number"==typeof a.top?a.top:0;a.brtype=a.brtype?a.brtype:"^";a.bold=a.bold?a.bold:!1;a.fontSize=a.fontSize?a.fontSize:"30px";a.fontFamily=a.fontFamily?a.fontFamily:"Georgia";a.color=a.color?a.color:"#ff0000";a.textAlign=a.textAlign?a.textAlign:"start";a.shadow="boolean"==typeof a.shadow?a.shadow:!1;a.rotate="number"==typeof a.rotate?a.rotate:0;a.stroke="boolean"==typeof a.stroke?a.stroke:!1;a.lineWidth="number"==typeof a.lineWidth?a.lineWidth:1;d.c_obj.save();d.c_obj.font=a.bold?"bold "+a.fontSize+" "+a.fontFamily:a.fontSize+" "+a.fontFamily;d.c_obj.fillStyle=a.color;d.c_obj.textAlign=a.textAlign;a.shadow&&(d.c_obj.shadowOffsetX="number"==typeof a.shadowOffsetX?a.shadowOffsetX:3,d.c_obj.shadowOffsetY="number"==typeof a.shadowOffsetY?a.shadowOffsetY:3,d.c_obj.shadowColor=a.shadowColor?a.shadowColor:"#97bfca",d.c_obj.shadowBlur="number"==typeof a.shadowBlur?a.shadowBlur:10);for(var b=a.text.split(""),c="",e=[],f=0;f<b.length;f++)b[f]!=a.brtype&&10!=b[f].charCodeAt()&&d.c_obj.measureText(c).width<a.width?c+=b[f]:(b[f]!=a.brtype&&(c+=b[f]),e.push(c),c="");e.push(c);1>e[e.length-1].length&&e.splice(e.length-1,1);0!=a.rotate&&(d.c_obj.translate(a.left,a.top),d.c_obj.rotate(a.rotate*Math.PI/180),d.c_obj.translate(-a.left,-a.top));for(c=0;c<e.length;c++)b=a.top+c*a.lineHeight,a.stroke?(d.c_obj.beginPath(),d.c_obj.strokeStyle=a.color,d.c_obj.lineWidth=a.lineWidth,d.c_obj.lineCap="round",d.c_obj.lineJoin="round",d.c_obj.strokeText(e[c],a.left,b)):d.c_obj.fillText(e[c],a.left,b);d.c_obj.restore()};d.output=function(a,b){a=a?a:"jpeg";b="number"==typeof b?b:1;return"png"==a?d.canvasDom.toDataURL("image/"+a):d.canvasDom.toDataURL("image/"+a,b)};d.clear=function(a,b){d.c_obj.clearRect(0,0,a?a:3E3,b?b:3E3)};d.effA=function(a,b,c,e){a="number"==typeof a?a:100;b="number"==typeof b?b:100;c="number"==typeof c?c:100;e=e?e:{};d.c_obj.save();d.c_obj.arc(a,b,c,0,2*Math.PI);d.c_obj.clip();d.CD(e);d.c_obj.restore()};d.init(a,b,c)};remTools.getCanvas=function(a,b,c){a=a?a:"canvas";b=b?b:750;c=c?c:1335;var e=setSize.size/100;$("#"+a).attr("width",b).attr("height",c).css("transform-origin","0% 0%").css("-webkit-transform-origin","0% 0%").css("transform","scale("+e+","+e+")").css("-webkit-transform","scale("+e+","+e+")");return document.getElementById(a).getContext("2d")};